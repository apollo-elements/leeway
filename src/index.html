<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ü§∑‚Äç‚ôÇÔ∏è Leeway: Chat over GraphQL</title>
    <link rel="stylesheet" href="/style.css">
    <script>
      // so embarassed: graphql/jsutils/instanceOf.mjs:16
      window.process = { env: { PRODUCTION: true } }
    </script>
    <script src="/assets/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
    <script type="module" src="/modules/app.js"></script>
    <script nomodule src="https://unpkg.com/systemjs/dist/system-production.js"></script>
    <script nomodule src="/system/app.js"></script>
  </head>
  <body unresolved>
    <info-box>
      <h2>Leeway is a simple chat app using <a href="https://npmjs.com/package/@apollo-elements/lit-apollo"><code>lit-apollo</code></a> and GraphQL subscriptions.</h2>
      <a href="https://gitlab.com/bennyp/demo-lit-apollo-subscriptions"><img src="https://upload.wikimedia.org/wikipedia/commons/1/18/GitLab_Logo.svg" alt="GitLab Logo" title="Repo"></p></a>
    </info-box>

    <leeway-username-input>
      <script type="application/graphql">
        mutation Join($nick: String!) {
          join(nick: $nick) {
            id
            nick
            status
          }
        }
      </script>
    </leeway-username-input>

    <leeway-userlist>
      <script type="application/graphql">
        query Users {
          id @client
          nick @client
          status @client
          users {
            id
            nick
            status
          }
        }
      </script>
    </leeway-userlist>

    <leeway-messages>
      <script type="application/graphql">
        query Messages {
          id @client
          nick @client
          status @client
          messages {
            date
            message
            userId
            nick
          }
          users {
            id
            nick
            status
          }
        }
      </script>
    </leeway-messages>

    <leeway-input>
      <script type="application/graphql">
        mutation sendMessage($userId: ID!, $message: String!) {
          sendMessage(userId: $userId, message: $message) {
            date
            message
            userId
          }
        }
      </script>
    </leeway-input>

    <leeway-status-notifier>
      <script type="application/graphql">
        mutation UpdateUserStatus($id: ID!, $status: Status!) {
          updateUserStatus(id: $id, status: $status)
        }
      </script>
    </leeway-status-notifier>

  </body>
</html>
