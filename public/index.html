<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ü§∑‚Äç‚ôÇÔ∏è Leeway: Chat over GraphQL</title>
    <link rel="stylesheet" href="/style.css">
    <script>
      // so embarassed: graphql/jsutils/instanceOf.mjs:16
      window.process = { env: { PRODUCTION: true } }
    </script>
    <script src="/assets/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
    <script type="module" src="/bundle.js"></script>
  </head>
  <body unresolved>
    <info-box>
      Leeway is a demo of <code>lit-apollo</code> using GraphQL subscriptions to create a simple chat app.
      The source code is available on <a href="https://gitlab.com/bennyp/demo-lit-apollo-subscriptions">GitLab</a>.
      Alternately, source maps are enabled, so just open dev tools to peruse the source.
    </info-box>

    <leeway-username-input>
      <script type="application/graphql">
        mutation Join($nick: String!) {
          join(nick: $nick) {
            id
            nick
            status
          }
        }
      </script>
    </leeway-username-input>

    <leeway-user-status-toast>
      <script type="application/graphql">
        subscription UserStatusUpdated {
          userStatusUpdated {
            nick
            status
          }
        }
      </script>
    </leeway-user-status-toast>

    <leeway-userlist>
      <script type="application/graphql">
        query Users {
          user @client { id nick status }
          users {
            id
            nick
            status
          }
        }
      </script>
    </leeway-userlist>

    <leeway-messages>
      <script type="application/graphql">
        query Messages {
          user @client { id nick status }
          messages {
            date
            message
            user
          }
        }
      </script>
    </leeway-messages>

    <leeway-input>
      <script type="application/graphql">
        mutation sendMessage($user: ID!, $message: String!) {
          sendMessage(user: $user, message: $message) {
            date
            message
            user
          }
        }
      </script>
    </leeway-input>

    <leeway-status-notifier>
      <script type="application/graphql">
        mutation UserStatusUpdated($id: ID, $status: Status) {
          userStatusUpdated(id: $id, status: $status) {
            id
            nick
            status
          }
        }
      </script>
    </leeway-status-notifier>

  </body>
</html>
